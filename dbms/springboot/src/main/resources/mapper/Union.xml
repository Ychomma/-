<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.springboot.mapper.UnionMapper">
    <select id="list" resultType="com.example.springboot.entity.Union">
    SELECT student.sno,student.sname,student.ssex,student.sage,student.sdept,student.address,course.cno,course.cname,teacher.tno,teacher.tname,sc.grade
    FROM student,course,teacher,sc where sc.cno=course.cno and sc.sno =student.sno and sc.cno=teacher.cno
    </select>
    <select id="listByCondition" resultType="com.example.springboot.entity.Union">
        SELECT student.sno,student.sname,student.ssex,student.sage,student.sdept,student.address,course.cno,course.cname,teacher.tno,teacher.tname,sc.grade
        FROM student,course,teacher,sc
        <where>
            <if test="1==1">
                sc.cno=course.cno and sc.sno =student.sno and sc.cno=teacher.cno
            </if>
            <if test="cno != null and cno != ''">
                and course.cno like concat('%', #{cno}, '%')
            </if>
            <if test="sno != null and sno != ''">
                 and sc.sno like concat('%', #{sno}, '%')
            </if>
        </where>
        order by sc.cno desc
    </select>
</mapper>
